<html>

<head>
  <title>Computer Builder</title>
  <meta charset="utf-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
    integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"></script>
</head>

<body>
  <div class="container" id="home">
    <header class="d-flex flex-wrap py-3 border-bottom mb-4 justify-content-center">
      <a href="#home" class="d-flex align-items-center mb-3 link-body-emphasis mb-md-0 me-md-auto text-decoration-none">
        <span class="fs-4">Computer Builder</span>
      </a>

      <ul class="nav nav-pills">
        <li class="nav-item"><a href="#home" class="nav-link active" aria-current="page">Home</a></li>
        <li class="nav-item"><a href="#shop" class="nav-link">PC Part Picker</a></li>
        <li class="nav-item"><a href="#addressInfo" class="nav-link">Address Info</a></li>
      </ul>
    </header>

    <form id="order-form" class="needs-validation" novalidate>

      <section id="shop">

        <h4 class="mb-3">PC Part Picker</h4>

        <!-- Processor -->
        <div class="row">
          <div class="col-md-6">
            <label for="processor" class="form-label">Processor *</label>
            <select class="form-select" id="processor" required>
              <option value="" selected>Choose...</option>
            </select>
            <div class="invalid-feedback">
              Please select a processor.
            </div>
          </div>

          <div class="col-md-3">
            <label for="processorQuantity" class="form-label">Quantity *</label>
            <input type="number" class="form-control" id="processorQuantity" placeholder="1" value="1" min="1" required>
            <div class="invalid-feedback">
              Please enter a valid quantity.
            </div>
          </div>

          <div class="col-md-3">
            <label for="processorPrice" class="form-label">Price</label>
            <input type="text" class="form-control" id="processorPrice" placeholder="0" value="0" readonly>
          </div>
        </div>
        <!-- End Processor -->

        <!-- RAM -->
        <div class="row mt-3">
          <div class="col-md-6">
            <label for="ram" class="form-label">RAM *</label>
            <select class="form-select" id="ram" required>
              <option value="" selected>Choose...</option>
            </select>
            <div class="invalid-feedback">
              Please select a RAM.
            </div>
          </div>

          <div class="col-md-3">
            <label for="ramQuantity" class="form-label">Quantity *</label>
            <input type="number" class="form-control" id="ramQuantity" placeholder="1" value="1" min="1" required>
            <div class="invalid-feedback">
              Please enter a valid quantity.
            </div>
          </div>

          <div class="col-md-3">
            <label for="ramPrice" class="form-label">Price</label>
            <input type="text" class="form-control" id="ramPrice" placeholder="0" value="0" readonly>
          </div>
        </div>
        <!-- End RAM -->

        <!-- Motherboard -->
        <div class="row mt-3">
          <div class="col-md-6">
            <label for="motherboard" class="form-label">Motherboard *</label>
            <select class="form-select" id="motherboard" required>
              <option value="" selected>Choose...</option>
            </select>
            <div class="invalid-feedback">
              Please select a motherboard.
            </div>
          </div>

          <div class="col-md-3">
            <label for="motherboardQuantity" class="form-label">Quantity *</label>
            <input type="number" class="form-control" id="motherboardQuantity" placeholder="1" value="1" min="1" required>
            <div class="invalid-feedback">
              Please enter a valid quantity.
            </div>
          </div>

          <div class="col-md-3">
            <label for="motherboardPrice" class="form-label">Price</label>
            <input type="text" class="form-control" id="motherboardPrice" placeholder="0" value="0" readonly>
          </div>
        </div>
        <!-- End Motherboard -->

        <!-- Video Card -->
        <div class="row mt-3">
          <div class="col-md-6">
            <label for="videoCard" class="form-label">Video Card *</label>
            <select class="form-select" id="videoCard" required>
              <option value="" selected>Choose...</option>
            </select>
            <div class="invalid-feedback">
              Please select a video card.
            </div>
          </div>

          <div class="col-md-3">
            <label for="videoCardQuantity" class="form-label">Quantity *</label>
            <input type="number" class="form-control" id="videoCardQuantity" placeholder="1" value="1" min="1" required>
            <div class="invalid-feedback">
              Please enter a valid quantity.
            </div>
          </div>

          <div class="col-md-3">
            <label for="videoCardPrice" class="form-label">Price</label>
            <input type="text" class="form-control" id="videoCardPrice" placeholder="0" value="0" readonly>
          </div>
        </div>
        <!-- End Video Card -->

        <!-- Storage -->
        <div class="row mt-3">
          <div class="col-md-6">
            <label for="storage" class="form-label">Storage *</label>
            <select class="form-select" id="storage" required>
              <option value="" selected>Choose...</option>
            </select>
            <div class="invalid-feedback">
              Please select a storage.
            </div>
          </div>

          <div class="col-md-3">
            <label for="storageQuantity" class="form-label">Quantity *</label>
            <input type="number" class="form-control" id="storageQuantity" placeholder="1" value="1" min="1" required>
            <div class="invalid-feedback">
              Please enter a valid quantity.
            </div>
          </div>

          <div class="col-md-3">
            <label for="storagePrice" class="form-label">Price</label>
            <input type="text" class="form-control" id="storagePrice" placeholder="0" value="0" readonly>
          </div>
        </div>
        <!-- End Storage -->

        <!-- Total Price -->
        <div class="row mt-3">
          <div class="col-md-3 offset-md-9">
            <label for="totalPrice" class="form-label">Total Price</label>
            <input type="text" class="form-control" id="totalPrice" placeholder="0" value="0" readonly>
        </div>
        <!-- End Total Price -->

      </section>

      <!-- Address Info -->
      <section class="row mt-5" id="addressInfo">
        <div class="col-md-12">
          <h4 class="mb-3">Address Info</h4>
          <div class="row g-3">
            <div class="col-sm-4">
              <label for="firstName" class="form-label">First name *</label>
              <input type="text" class="form-control" id="firstName" placeholder="" value="" required>
              <div class="invalid-feedback">
                First name is required.
              </div>
            </div>

            <div class="col-sm-4">
              <label for="lastName" class="form-label">Last name *</label>
              <input type="text" class="form-control" id="lastName" placeholder="" value="" required>
              <div class="invalid-feedback">
                Last name is required.
              </div>
            </div>

            <div class="col-4">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" placeholder="name@provider.com">
              <div class="invalid-feedback">
                E-Mail address is invalid.
              </div>
            </div>

            <div class="col-6">
              <label for="address" class="form-label">Address *</label>
              <input type="text" class="form-control" id="address" placeholder="Your Address" required>
              <div class="invalid-feedback">
                Please enter an address.
              </div>
            </div>

            <div class="col-md-3">
              <label for="country" class="form-label">Country *</label>
              <select class="form-select" id="country" required>
                <option value="" selected>Choose...</option>
                <option value="Germany">Germany</option>
                <option value="USA">USA</option>
              </select>
              <div class="invalid-feedback">
                Please select a country.
              </div>
            </div>

            <div class="col-md-3">
              <label for="state" class="form-label">State *</label>
              <select class="form-select" id="state" required>
                <option value="">Choose...</option>
              </select>
              <div class="invalid-feedback">
                Please select a state.
              </div>
            </div>
          </div>

          <button class="w-100 btn btn-primary btn-lg mt-4 mb-5" onclick="submitForm()" type="button">Submit Order</button>
        </div>
      </section>
      <!-- End Address Info -->

    </form>

  </div>

  <!-- Summary Modal -->
  <div class="modal" tabindex="-1" id="summary-modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Summary</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p id="summary-text"></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End Summary Modal -->

</body>

</html>

<script>
  const data = {
    processors: [
      { id: 1, name: 'Intel Core i5', price: 200 },
      { id: 2, name: 'Intel Core i7', price: 300 },
      { id: 3, name: 'Intel Core i9', price: 400 },
      { id: 4, name: 'AMD Ryzen 5', price: 250 },
      { id: 5, name: 'AMD Ryzen 7', price: 350 },
      { id: 6, name: 'AMD Ryzen 9', price: 450 }
    ],
    ram: [
      { id: 1, name: '8 GB', price: 100 },
      { id: 2, name: '16 GB', price: 200 },
      { id: 3, name: '32 GB', price: 300 }
    ],
    motherboard: [
      { id: 1, name: 'ASUS Prime', price: 150 },
      { id: 2, name: 'Gigabyte Aorus', price: 250 },
      { id: 3, name: 'MSI Gaming', price: 350 }
    ],
    videoCard: [
      { id: 1, name: 'Nvidia GeForce RTX 3060', price: 400 },
      { id: 2, name: 'Nvidia GeForce RTX 3070', price: 500 },
      { id: 3, name: 'Nvidia GeForce RTX 3080', price: 600 },
      { id: 4, name: 'AMD Radeon RX 6700 XT', price: 450 },
      { id: 5, name: 'AMD Radeon RX 6800 XT', price: 550 },
      { id: 6, name: 'AMD Radeon RX 6900 XT', price: 650 }
    ],
    storage: [
      { id: 1, name: 'Samsung 970 EVO', price: 150 },
      { id: 2, name: 'Western Digital Black', price: 250 },
      { id: 3, name: 'Crucial P5', price: 350 }
    ],
    totalPrice: 0,
  };

  // This function is called when the document is ready
  $(function () {
    // Add processors to the processor select box
    const processorSelectBox = $('#processor');
    data.processors.forEach(processor => {
      processorSelectBox.append(`<option value="${processor.id}">${processor.name}</option>`);
    });

    // Add RAMs to the RAM select box
    const ramSelectBox = $('#ram');
    data.ram.forEach(ram => {
      ramSelectBox.append(`<option value="${ram.id}">${ram.name}</option>`);
    });

    // Add motherboards to the motherboard select box
    const motherboardSelectBox = $('#motherboard');
    data.motherboard.forEach(motherboard => {
      motherboardSelectBox.append(`<option value="${motherboard.id}">${motherboard.name}</option>`);
    });

    // Add video cards to the video card select box
    const videoCardSelectBox = $('#videoCard');
    data.videoCard.forEach(videoCard => {
      videoCardSelectBox.append(`<option value="${videoCard.id}">${videoCard.name}</option>`);
    });

    // Add storages to the storage select box
    const storageSelectBox = $('#storage');
    data.storage.forEach(storage => {
      storageSelectBox.append(`<option value="${storage.id}">${storage.name}</option>`);
    });
  })

  // This function is called when the country select box is changed
  // and it updates the state select box according to the selected country
  $(document).on('change', '#country', function () {
    const selectedCountry = $(this).val();

    if (selectedCountry === '') {
      $('#state').html('<option value="">Choose...</option>');
    } else if (selectedCountry === 'Germany') {
      $('#state').html('<option value="Berlin">Berlin</option><option value="Hamburg">Hamburg</option>');
    } else if (selectedCountry === 'USA') {
      $('#state').html('<option value="California">California</option><option value="New York">New York</option>');
    }
  });

  function submitForm() {
    const form = $('#order-form');

    const formValid = form[0].checkValidity();

    if (formValid) {
      // Open bootstrap modal and show summary

      const summary = '<h5>Order Summary</h5>' +
        '<p><strong>Processor:</strong> ' + $('#processor option:selected').text() + ' x' + $('#processorQuantity').val() + '</p>' +
        '<p><strong>RAM:</strong> ' + $('#ram option:selected').text() + ' x' + $('#ramQuantity').val() + '</p>' +
        '<p><strong>Motherboard:</strong> ' + $('#motherboard option:selected').text() + ' x' + $('#motherboardQuantity').val() + '</p>' +
        '<p><strong>Video Card:</strong> ' + $('#videoCard option:selected').text() + ' x' + $('#videoCardQuantity').val() + '</p>' +
        '<p><strong>Storage:</strong> ' + $('#storage option:selected').text() + ' x' + $('#storageQuantity').val() + '</p>' +
        '<p><strong>Total Price:</strong> ' + $('#totalPrice').val() + '</p>' +
        '<h5>Address Info</h5>' +
        '<p><strong>First Name:</strong> ' + $('#firstName').val() + '</p>' +
        '<p><strong>Last Name:</strong> ' + $('#lastName').val() + '</p>' +
        '<p><strong>Email:</strong> ' + $('#email').val() + '</p>' +
        '<p><strong>Address:</strong> ' + $('#address').val() + '</p>' +
        '<p><strong>Country:</strong> ' + $('#country').val() + '</p>' +
        '<p><strong>State:</strong> ' + $('#state').val() + '</p>';

      $('#summary-text').html(summary);

      $('#summary-modal').modal('show');
      
    } else {
      form.addClass('was-validated');
    }
  }
</script>

<script>
  // Processor operations

  // This function is called when the processor select box is changed
  // and it updates the price input according to the selected processor
  $(document).on('change', '#processor', function () {
    const selectedProcessor = $(this).val();
    const processor = data.processors.find(p => p.id == selectedProcessor);
    let quantity = $('#processorQuantity').val();

    if (quantity == undefined || quantity === '') {
      $('#processorQuantity').val(1);
      quantity = 1;
    }

    calculateProcessorPrice(processor, quantity);
  });

  // This function is called when the processor quantity input is changed
  $(document).on('change', '#processorQuantity', function () {
    const selectedProcessor = $('#processor').val();

    if (selectedProcessor === '') {
      return;
    }

    const processor = data.processors.find(p => p.id == selectedProcessor);
    let quantity = $(this).val();

    if (quantity == undefined || quantity === '') {
      $('#processorQuantity').val(1);
      quantity = 1;
    }

    calculateProcessorPrice(processor, quantity);
  });

  // Calculate the processor price and set the value to the processor price input
  function calculateProcessorPrice(processor, quantity) {
    if (processor === undefined || quantity === undefined) {
      $('#processorPrice').val('');
      return;
    }

    const price = processor.price * quantity;
    $('#processorPrice').val(price + ' €');
    calculateTotalPrice();
  }
</script>

<script>
  // RAM operations

  // This function is called when the RAM select box is changed
  // and it updates the price input according to the selected RAM
  $(document).on('change', '#ram', function () {
    const selectedRam = $(this).val();
    const ram = data.ram.find(r => r.id == selectedRam);
    let quantity = $('#ramQuantity').val();

    if (quantity == undefined || quantity === '') {
      $('#ramQuantity').val(1);
      quantity = 1;
    }

    calculateRamPrice(ram, quantity);
  });

  // This function is called when the RAM quantity input is changed
  $(document).on('change', '#ramQuantity', function () {
    const selectedRam = $('#ram').val();

    if (selectedRam === '') {
      return;
    }

    const ram = data.ram.find(r => r.id == selectedRam);
    let quantity = $(this).val();

    if (quantity == undefined || quantity === '') {
      $('#ramQuantity').val(1);
      quantity = 1;
    }

    calculateRamPrice(ram, quantity);
  });

  // Calculate the RAM price and set the value to the RAM price input
  function calculateRamPrice(ram, quantity) {
    if (ram === undefined || quantity === undefined) {
      $('#ramPrice').val('');
      return;
    }

    const price = ram.price * quantity;
    $('#ramPrice').val(price + ' €');
    calculateTotalPrice();
  }
</script>

<script>
  // Motherboard operations

  // This function is called when the motherboard select box is changed
  // and it updates the price input according to the selected motherboard
  $(document).on('change', '#motherboard', function () {
    const selectedMotherboard = $(this).val();
    const motherboard = data.motherboard.find(m => m.id == selectedMotherboard);
    let quantity = $('#motherboardQuantity').val();

    if (quantity == undefined || quantity === '') {
      $('#motherboardQuantity').val(1);
      quantity = 1;
    }

    calculateMotherboardPrice(motherboard, quantity);
  });

  // This function is called when the motherboard quantity input is changed
  $(document).on('change', '#motherboardQuantity', function () {
    const selectedMotherboard = $('#motherboard').val();

    if (selectedMotherboard === '') {
      return;
    }

    const motherboard = data.motherboard.find(m => m.id == selectedMotherboard);
    let quantity = $(this).val();

    if (quantity == undefined || quantity === '') {
      $('#motherboardQuantity').val(1);
      quantity = 1;
    }

    calculateMotherboardPrice(motherboard, quantity);
  });

  // Calculate the motherboard price and set the value to the motherboard price input
  function calculateMotherboardPrice(motherboard, quantity) {
    if (motherboard === undefined || quantity === undefined) {
      $('#motherboardPrice').val('');
      return;
    }

    const price = motherboard.price * quantity;
    $('#motherboardPrice').val(price + ' €');
    calculateTotalPrice();
  }
</script>

<script>
  // Video Card operations

  // This function is called when the video card select box is changed
  // and it updates the price input according to the selected video card
  $(document).on('change', '#videoCard', function () {
    const selectedVideoCard = $(this).val();
    const videoCard = data.videoCard.find(v => v.id == selectedVideoCard);
    let quantity = $('#videoCardQuantity').val();

    if (quantity == undefined || quantity === '') {
      $('#videoCardQuantity').val(1);
      quantity = 1;
    }

    calculateVideoCardPrice(videoCard, quantity);
  });

  // This function is called when the video card quantity input is changed
  $(document).on('change', '#videoCardQuantity', function () {
    const selectedVideoCard = $('#videoCard').val();

    if (selectedVideoCard === '') {
      return;
    }

    const videoCard = data.videoCard.find(v => v.id == selectedVideoCard);
    let quantity = $(this).val();

    if (quantity == undefined || quantity === '') {
      $('#videoCardQuantity').val(1);
      quantity = 1;
    }

    calculateVideoCardPrice(videoCard, quantity);
  });

  // Calculate the video card price and set the value to the video card price input
  function calculateVideoCardPrice(videoCard, quantity) {
    if (videoCard === undefined || quantity === undefined) {
      $('#videoCardPrice').val('');
      return;
    }

    const price = videoCard.price * quantity;
    $('#videoCardPrice').val(price + ' €');
    calculateTotalPrice();
  }
</script>

<script>
  // Storage operations

  // This function is called when the storage select box is changed
  // and it updates the price input according to the selected storage
  $(document).on('change', '#storage', function () {
    const selectedStorage = $(this).val();
    const storage = data.storage.find(s => s.id == selectedStorage);
    let quantity = $('#storageQuantity').val();

    if (quantity == undefined || quantity === '') {
      $('#storageQuantity').val(1);
      quantity = 1;
    }

    calculateStoragePrice(storage, quantity);
  });

  // This function is called when the storage quantity input is changed
  $(document).on('change', '#storageQuantity', function () {
    const selectedStorage = $('#storage').val();

    if (selectedStorage === '') {
      return;
    }

    const storage = data.storage.find(s => s.id == selectedStorage);
    let quantity = $(this).val();

    if (quantity == undefined || quantity === '') {
      $('#storageQuantity').val(1);
      quantity = 1;
    }

    calculateStoragePrice(storage, quantity);
  });

  // Calculate the storage price and set the value to the storage price input
  function calculateStoragePrice(storage, quantity) {
    if (storage === undefined || quantity === undefined) {
      $('#storagePrice').val('');
      return;
    }

    const price = storage.price * quantity;
    $('#storagePrice').val(price + ' €');

    calculateTotalPrice();
  }
</script>

<script>
  // Calculate the total price and set the value to the total price input
  function calculateTotalPrice() {
    const processorPrice = $('#processorPrice').val().replace(' €', '');
    const ramPrice = $('#ramPrice').val().replace(' €', '');
    const motherboardPrice = $('#motherboardPrice').val().replace(' €', '');
    const videoCardPrice = $('#videoCardPrice').val().replace(' €', '');
    const storagePrice = $('#storagePrice').val().replace(' €', '');

    const totalPrice = parseInt(processorPrice) + parseInt(ramPrice) + parseInt(motherboardPrice) + parseInt(videoCardPrice) + parseInt(storagePrice);
    $('#totalPrice').val(totalPrice + ' €');
  }
</script>
